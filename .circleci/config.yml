version: 2.1
orbs:
  node: circleci/node@1.1.6
  cypress: cypress-io/cypress@1.16.1
  workflows:
    build:
      jobs:
        - cypress/install:
          build: npm run start
        - cypress/run:
          requires:
            - cypress/install
            executor: cypress/browsers-chrome73-ff68
            browser: chrome
            post-steps:
              - store_test_results:
                  path: cypress/results
workflows:
  Portfolio-Tests:
      jobs:
        - cypress/install
        - cypress/run